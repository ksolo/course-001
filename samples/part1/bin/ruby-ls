#!/usr/bin/env ruby

require 'open3'
require 'pry'
require 'optparse'

module RubyLS

  class Application

    attr_reader :directory

    def initialize(argv)
      @options, @directory = parse_options(argv)
      @view = RubyLS::View.new(@options)
    end

    def run
      @view.render(directory)
    end

    private

    def parse_options(argv)
      options = {}
      parser = OptionParser.new

      parser.on("-l") { options[:long_format] = true }
      parser.on("-a") { options[:include_hidden] = true }

      directory = parser.parse(argv).pop

      [options, directory]
    end

  end

  class View

    def initialize(options={})
      @options = options
    end

    def render(dir)
      $stdout.puts "woot"
    end

  end

end

RubyLS::Application.new(ARGV).run
